{% extends "::base.html.twig" %}
{% block css %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/css/select2.css" rel="stylesheet" type="text/css" />
{% endblock %}
{% block body %}
<div class="row">
	<div class="col-md-4 col-md-offset-4">
		<div class="white-box">
			<form method="post">
				<h3 class="box-title text-center">Solicitar</h3>
				<label for="">Caja que solicita</label>
				<select required class="select2" name="recibe" id="misCajas">
					<option></option>
				</select><br>
				<label for="">Caja a solicitar</label>
				<select required class="select2" name="envia" id="Cajas">
					<option></option>
				</select><br><br>
				<input id="monto" required  name="monto" min="1" class="form-control input-lg" placeholder="0,00 R$" type="text"><br>
				<button id="send" class="btn btn-primary center-block">Enviar</button>
			</form>
		</div>
	</div>
</div>
{% endblock %}
{% block javascripts %}
<script src="{{ asset ('js/maskMoney/src/jquery.maskMoney.js')}}" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.js" type="text/javascript"></script>
<script>
	$('#send').on('click',function(){
		var monto = parseFloat($('#monto').maskMoney('unmasked')[0]);
		console.log(monto);
		$('#monto').val(monto);
	});
$(document).ready(function(){
	$("#monto").maskMoney({thousands:'.', decimal:',', allowZero: true, suffix: ' R$'});
	console.log({{newCajas | raw}});
	var data = {{newCajas | raw}};
	var data2 = {{newCajas2 | raw}};
	function formatState (state) {
		//console.log(state);
  //var baseUrl = "/user/pages/images/flags";
  var $state = $(
  	`<p>
  	<div style="background-image: url(/img/allImg/${state.image});" class="img-flag alineado"></div>
  	${state.text}
  	</p>`
  	);
  return $state;
};

	// For select 2
	$("#misCajas").select2({
		placeholder: "Seleccione una caja",
		allowClear: true,
		data:data,
		templateResult: formatState,
	});
	// For select 2
	$("#Cajas").select2({
		placeholder: "Seleccione una caja",
		allowClear: true,
		data:data2,
		templateResult: formatState,
	});
});
</script>
{% endblock %}
